---
title: 数据开发面试题
date: 2021-06-26 21:09:31
tags: bigdata
description: 大数据SQL开发方向，分为数仓概念、SQL概念、SQL代码、SQL优化、其他
---

## 数仓概念

1. 数据集市与数据仓库的区别

2. 数仓分层

   - ODS 数据运营层

     贴源，抽取、清洗、传输。ETL的工作。不对源数据做业务逻辑加工。

   - DW 数据仓库层

     - DWD 数据明细层
     - DWB 数据汇总层（低粒度）
     - DWS 数据汇总层（高粒度）

   - [DM 数据集市层]

   - APP（ADS）数据应用层

3. 常见数据模型

   - 星型模型

     所有维表都直接连接到事实表上。

     **缺点**：不存在渐变维度，所以数据有一定的冗余。如机构维表：

     | 一级机构 | 二级机构 | 三级机构 | 四级机构       |
     | -------- | -------- | -------- | -------------- |
     | 总行     | 上海分行 | 浦东支行 | 浦东支行营业部 |
     | 总行     | 上海分行 | 宝山支行 | 宝山支行营业部 |
     | 总行     | 深圳分行 | 福田支行 | 福田支行营业部 |

     其中总行和上海分行出现多次，数据冗余

     **优点**：因为数据的冗余所以不需要做外部的连接，因此一般情况下效率比雪花模型要高

   - 雪花模型

     一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上。

     **优点**：去除数据冗余，层次清晰

     **缺点**：查询效率会因为外部表关联而降低

4. 增量表、全量表、拉链表区别

   拉链表如何使用

## SQL 概念

1. dql、dml、dcl、ddl

   - dql 数据查询语言
   - dml 数据操纵语言
   - dcl 数据库控制语言
   - ddl 数据定义语言

2. left join 和 inner join 的区别

3. where 和 having 的区别

4. Insert into 和 insert overwrite 的区别

5. 筛选条件放在 on 和 where 后面有什么区别

6. 连续三个 full join 数据会重复吗

7. 如何删除表内的数据

8. 开窗函数的使用

9. HIVE 常用哪些函数

   [HIVE 常用函数](https://mp.weixin.qq.com/s?__biz=MzI2MDQzOTk3MQ==&mid=2247485171&idx=2&sn=db48650b40e7a0c69928cd9a11fcf4c6&chksm=ea68ec3fdd1f65296081b0d88b3751dd22171bceeef204b3deae7b3defe83268c97298620be4&scene=21#wechat_redirect)

10. 数据去重有哪些方法

11. HIVE 建表有哪些方法

    1. 直接建表
    2. as
    3. like

12. HIVE 执行计划有看过吗？一般关注哪几个点？

## SQL 代码

### Q1

源表：

| 客户号 | 理财经理号 | 客户状态 |
| ------ | ---------- | -------- |
| 1      | 1          | 1        |
| 2      | 1          | 0        |
| 3      | 2          | 1        |

目标表：

| 理财经理号 | 正常客户数 | 不正常客户数 |
| ---------- | ---------- | ------------ |
| 1          | 1          | 1            |
| 2          | 1          | 0            |

### Q2

源表：

| 姓名 | 消费类型  | 金额 |
| ---- | --------- | ---- |
| Mike | breakfast | 5    |
| Mike | lunch     | 15   |
| Mike | dinner    | 13   |

目标表

| 姓名 | 早饭消费 | 午饭消费 | 晚饭消费 |
| ---- | -------- | -------- | -------- |
| Mike | 5        | 15       | 13       |

### Q3

客户名单表、黑名单。将客户名单中黑名单客户剔除

### Q4

TODO: left join 题

## SQL 优化

1. 谈谈大表关联时可以做哪些优化

2. 谈谈做过哪些 sql 优化

   [HIVE 调优](https://mp.weixin.qq.com/s?__biz=MzI2MDQzOTk3MQ==&mid=2247485048&idx=1&sn=5fc1219f4947bea9743cd938cec510c7&chksm=ea68ecb4dd1f65a2df364d79272e0e472a394c5b13b5d55d848c89d9498ccb7ea78a933fbdea&scene=21#wechat_redirect)

3. exists 和 in 分别在什么情况下效率高

TODO: HIVE 优化文档

## 其他

1. 简单的 python 基础
2. kafka 基本概念
3. kudu 基本概念
4. Kylin 基础知识
